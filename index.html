<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Santa Says - The Doom Edition ğŸ…</title>
    <link rel="stylesheet" href="css/styles.css">
    <!-- Google Font for festive feel -->
    <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@400;700&family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Start Screen -->
    <div id="start-screen" class="screen">
        <div class="start-content">
            <h1 class="game-title">ğŸ… SANTA SAYS ğŸ…</h1>
            <h2 class="subtitle">THE DOOM EDITION</h2>
            <div class="instructions">
                <p>Navigate the Christmas maze!</p>
                <p>Only move when <span class="highlight">SANTA SAYS</span>!</p>
                <p>Follow Santa's directions to find his Sack!</p>
                <p class="warning">âš ï¸ Wrong moves trigger TRAPS! âš ï¸</p>
            </div>
            <button id="start-btn" class="start-button">START GAME</button>
            <div class="controls-hint">
                <p>Use Arrow Keys or Click the Compass</p>
            </div>
            
            <!-- Printer Connection Section -->
            <div id="printer-section">
                <div class="printer-divider"></div>
                <div id="printer-status" class="printer-status">
                    <span class="printer-icon">ğŸ–¨ï¸</span>
                    <span id="printer-status-text">Receipt printer not configured</span>
                </div>
                <div class="printer-buttons">
                    <button id="connect-printer-btn" class="printer-button">Setup Receipt Printer</button>
                    <button id="test-print-btn" class="printer-button printer-button-test">Test Print</button>
                </div>
                <p class="printer-hint">Use "Launch Game (Silent Print).bat" for no dialog</p>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="screen hidden">
        <!-- Main Game View (Doom-style 3D) -->
        <div id="game-viewport">
            <canvas id="game-canvas"></canvas>
            
            <!-- Simple goal indicator - reach the end of the maze! -->
            <div id="goal-indicator">
                <span class="goal-text">ğŸ„ Find Santa's Sack! ğŸ</span>
            </div>
        </div>

        <!-- Santa Panel (Right Side) -->
        <div id="santa-panel">
            <!-- Santa's Portrait -->
            <div id="santa-portrait">
                <div id="santa-face">
                    <!-- Santa SVG will be drawn here -->
                </div>
                <div id="speech-bubble" class="hidden">
                    <p id="santa-command"></p>
                </div>
            </div>

            <!-- Timer (counts up to track completion time) -->
            <div id="timer-section">
                <div class="timer-label">â±ï¸ TIME</div>
                <div id="timer-display">0:00</div>
            </div>

            <!-- Compass Controls (Forward, Left, Right only - no backward in maze mode) -->
            <div id="compass-controls">
                <div class="compass-label">CONTROLS</div>
                <div class="compass">
                    <button class="compass-btn" id="btn-up" data-direction="forward">
                        <span class="arrow">â–²</span>
                        <span class="label">FWD</span>
                    </button>
                    <div class="compass-middle">
                        <button class="compass-btn" id="btn-left" data-direction="left">
                            <span class="arrow">â—„</span>
                            <span class="label">L</span>
                        </button>
                        <div class="compass-center">ğŸ§­</div>
                        <button class="compass-btn" id="btn-right" data-direction="right">
                            <span class="arrow">â–º</span>
                            <span class="label">R</span>
                        </button>
                    </div>
                    <!-- Backward button removed - maze navigation is forward-only -->
                </div>
            </div>
        </div>
    </div>

    <!-- Trap Overlay (for when player loses) -->
    <div id="trap-overlay" class="overlay hidden">
        <div id="trap-content">
            <div id="trap-animation"></div>
            <h2 id="trap-message"></h2>
        </div>
    </div>

    <!-- Win Screen -->
    <div id="win-screen" class="screen hidden">
        <div class="win-content">
            <h1>ğŸ„ YOU MADE IT! ğŸ„</h1>
            <div id="sack-animation">
                <div class="sack">ğŸ…</div>
            </div>
            <p class="win-text">You found Santa's Sack!</p>
            <div id="final-time-container">
                <p class="time-label">Your Time:</p>
                <div id="final-time">0:00</div>
            </div>
            <div id="print-status-container">
                <div id="win-print-status" class="win-print-status"></div>
            </div>
            <div class="win-buttons">
                <button id="print-score-btn" class="start-button print-btn">ğŸ–¨ï¸ PRINT SCORE</button>
                <button id="play-again-btn" class="start-button">PLAY AGAIN</button>
            </div>
        </div>
    </div>

    <!-- Receipt Print Template (hidden, only for printing) -->
    <div id="receipt-template" class="receipt-only">
        <div class="receipt-content">
            <div class="receipt-header">
                <div class="receipt-logo">ğŸ…</div>
                <h1>SANTA SAYS</h1>
                <p class="receipt-subtitle">THE DOOM EDITION</p>
                <div class="receipt-divider">************************</div>
            </div>
            <div class="receipt-body">
                <p class="receipt-congrats">CONGRATULATIONS!</p>
                <p class="receipt-msg">You found Santa's Sack!</p>
                <div class="receipt-divider">------------------------</div>
                <p class="receipt-label">YOUR TIME:</p>
                <p class="receipt-time" id="receipt-time">0:00</p>
                <div class="receipt-divider">------------------------</div>
                <p class="receipt-date" id="receipt-date"></p>
            </div>
            <div class="receipt-footer">
                <div class="receipt-divider">************************</div>
                <p class="receipt-thanks">Thank you for playing!</p>
                <p class="receipt-holly">ğŸ„ Happy Holidays! ğŸ„</p>
                <div class="receipt-trees">ğŸŒ²ğŸŒ²ğŸŒ²ğŸŒ²ğŸŒ²ğŸŒ²ğŸŒ²ğŸŒ²</div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/receipt-printer.js"></script>
    <script src="js/raycaster.js"></script>
    <script src="js/santa.js"></script>
    <script src="js/game.js"></script>
</body>
</html>

